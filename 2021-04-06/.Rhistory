mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(5, "Accent"),brewer.pal(8, "Dark2"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=20),
plot.subtitle = element_text(size=16),
plot.caption = element_text(size=8),
legend.text = element_text(size=10),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(5, "Accent"),brewer.pal(8, "Dark2"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=20),
plot.subtitle = element_text(size=16),
plot.caption = element_text(size=8),
legend.text = element_text(size=10),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=20),
plot.subtitle = element_text(size=16),
plot.caption = element_text(size=8),
legend.text = element_text(size=10),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% fct_lump(5, production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% fct_lump(n=5, production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = fct_lump(crop_oil, production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = fct_lump(5, crop_oil, production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% factor %>% fct_lump(5, production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% factor %>% fct_lump(5, wt=production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
?fct_lump
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% factor %>% fct_lump_n(5, wt=production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% factor %>% fct_lump_n(5)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %$% factor(crop_oil)
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% factor) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% factor %>% fct_lump(5, production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% factor %>% fct_lump(production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% factor %>% fct_lump(5, w = production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod),
crop_oil = crop_oil %>% factor %>% fct_lump(5, prop = production)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
vegoil %>%
filter(!grepl("OWID",code)) %>%
filter(year==2010) %>%
group_by(code) %>%
mutate(production = production/1000000,
code.year.prod = sum(production, na.rm=TRUE)) %>%
ungroup %>%
mutate(code = code %>% fct_reorder(code.year.prod),
entity = entity %>% fct_reorder(code.year.prod)) %>%
filter(code %in% rev(levels(code))[1:10]) %>%
ggplot(aes(x = entity, y = production, fill=crop_oil)) +
geom_col() +
coord_flip() +
dark_theme_minimal() +
scale_fill_manual(values = c(brewer.pal(8, "Dark2"),brewer.pal(5, "Accent"))) +
scale_y_continuous(labels = scales::comma_format()) +
theme(text = element_text(family="pmarker", size=18),
plot.title = element_text(size=24),
plot.subtitle = element_text(size=20),
plot.caption = element_text(size=11),
legend.text = element_text(size=14),
legend.position = "right") +
labs(title = "Vegetable Oil Production by Country",
subtitle = "c. 2010",
x = "",
y = "Hectacres (in millions!!)",
fill = "",
caption = "#TidyTuesday Visualization by @IanAGutierrez | Source: @ourworldindata")
